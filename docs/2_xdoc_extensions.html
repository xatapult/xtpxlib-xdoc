<?xml version="1.0" encoding="UTF-8"?><html xmlns="http://www.w3.org/1999/xhtml" xmlns:xtlcon="http://www.xtpxlib.nl/ns/container">
  <head>
    <link rel="stylesheet" type="text/css" href="resources/xtpxlib-moduledoc.css"/>
    <link rel="shortcut icon" href="resources/favicon.ico"/>
    <title>2 xdoc extensions</title>
  </head>
  <body><div class="chapter" id="sect-xdoc-extensions"><a name="sect-xdoc-extensions"/><h1 class="chapter"><span class="chapter-number">2 </span><code class="code">xdoc</code> extensions</h1><p class="para">The <span class="emphasis bold"><code class="code">xtpxlib-xdoc</code></span> component uses (a subset of) <a href="https://docbook.org/" target="_blank"><span class="link">DocBook 5.1</span></a> as its main vocabulary. Within this there can be so-called <span class="emphasis italic"><code class="code">xdoc</code>
      extensions</span>. These are specific elements in the <code class="code">xdoc</code> (<code class="code">http://www.xtpxlib.nl/ns/xdoc</code>) namespace that trigger
    special actions, like generating code documentation or describe some XML document.</p><div class="sect1" id="sect-available-xdoc-extension-elements"><a name="sect-available-xdoc-extension-elements"/><h2 class="sect1"><span class="sect1-number">2.1</span> <code class="code">xdoc</code> extension elements</h2><p class="para">The <code class="code">xdoc</code> format recognizes the following extension elements. The <code class="code">xdoc:</code> namespace prefix used here is bound to the
        <code class="code">http://www.xtpxlib.nl/ns/xdoc</code> namespace (<code class="code">xmlns:xdoc="http://www.xtpxlib.nl/ns/xdoc"</code>).</p><div class="sect2" id="d404e935"><a name="d404e935"/><h3 class="sect2"><span class="sect2-number">2.1.1</span> Extension element <code class="tag">&lt;xdoc:dump-parameters&gt;</code></h3><p class="para">This extension element shows the parameters that are currently in use. It is mainly use for debugging purposes.</p><div class="programlisting"><pre class="programlisting">&lt;xdoc:dump-parameters type? = "comment" | "table" /&gt;</pre></div><p class="para"> </p><div class="table"><table class="table"><thead><tr><th><p class="para">Attribute</p></th><th><p class="para">#</p></th><th><p class="para">Type</p></th><th><p class="para">Description</p></th></tr></thead><tbody><tr><td><p class="para"><code class="code">type</code></p></td><td><p class="para">?</p></td><td><p class="para"><code class="code">xs:string</code></p></td><td><p class="para">Default: <code class="code">comment</code></p><p class="para">Whether to dump the parameters as a comment or table.</p><div class="table"><table class="table"><thead><tr><th><p class="para">Value</p></th><th><p class="para">Description</p></th></tr></thead><tbody><tr><td><p class="para"><code class="code">comment</code></p></td><td><p class="para">Dump the parameters as an XML comment</p></td></tr><tr><td><p class="para"><code class="code">table</code></p></td><td><p class="para">Dump the parameters as a table</p></td></tr></tbody></table></div><p class="para"/></td></tr></tbody></table></div></div><div class="sect2" id="d404e1016"><a name="d404e1016"/><h3 class="sect2"><span class="sect2-number">2.1.2</span> Extension element <code class="tag">&lt;xdoc:transform&gt;</code></h3><p class="para">This extension element runs an <code class="code">xdoc</code> transformation (either XProc (1.0) or XSLT (2.0 or 3.0)). It is completely replaced by
        the outcome of the transformation.</p><p class="para">There are several <a href="#sect-builtin-xdoc-transformations"><span class="link">built-in transformations</span></a>. You can also <a href="#sect-write-your-own-transformations"><span class="link">write your own transformations</span></a>.</p><div class="programlisting"><pre class="programlisting">&lt;xdoc:transform href = xs:anyURI
                (any)? &gt;
  &lt;!-- Usually an &lt;xi:include&gt; element to load the data for the transformation. --&gt;
&lt;/xdoc:transform&gt;</pre></div><p class="para"> </p><div class="table"><table class="table"><thead><tr><th><p class="para">Attribute</p></th><th><p class="para">#</p></th><th><p class="para">Type</p></th><th><p class="para">Description</p></th></tr></thead><tbody><tr><td><p class="para"><code class="code">href</code></p></td><td><p class="para">1</p></td><td><p class="para"><code class="code">xs:anyURI</code></p></td><td><p class="para">Reference to the actual transformation. Relative names are resolved against the location of the source document.</p><p class="para">This file's extension determines whether an XProc 1.0 (extension: <code class="code">.xpl</code>) or an XSLT (extension: <code class="code">.xsl</code>) is
        done.</p><p class="para">A value that starts with <code class="code">$xdoc</code> is assumed to be an <code class="code">xtpxlib-xdoc</code> built-in transformation (e.g.
          <code class="code">href="$xdoc/code-docgen.xpl"</code>). See also <a href="#sect-builtin-xdoc-transformations" class="xref">2.2 Built-in xdoc transformations</a>.</p></td></tr><tr><td><p class="para"><code class="code">(any)</code></p></td><td><p class="para">?</p></td><td><p class="para"/></td><td><p class="para">Often transformations specify additional attributes on the <code class="tag">&lt;xdoc:transform&gt;</code> element to parametrize their functionality. Any
        additional attribute is allowed here.</p></td></tr></tbody></table></div></div></div><div class="sect1" id="sect-builtin-xdoc-transformations"><a name="sect-builtin-xdoc-transformations"/><h2 class="sect1"><span class="sect1-number">2.2</span> Built-in <code class="code">xdoc</code> transformations</h2><div class="sect2" id="d404e1124"><a name="d404e1124"/><h3 class="sect2"><span class="sect2-number">2.2.1</span> XProc 1.0 pipeline: <code class="code">code-docgen.xpl</code></h3><p class="para">Takes some XML document (XSL, XSD, XProc, ordinary XML, etc.) and tries to generate some documentation out of it. For instance this section itself is generated by the <code class="code">code-docgen.xpl</code> transformation on itself.</p><p class="para">Typical usage (within an <code class="code">xdoc</code> source document):</p><div class="programlisting"><pre class="programlisting">&lt;xdoc:transform href="$xdoc/code-docgen.xpl filecomponents="…" header-level=…"" &gt;
  &lt;xi:include href="path/to/document/to/generate/documentation/for"/&gt;
&lt;/xdoc:transform&gt;</pre></div><ul class="itemizedlist"><li><p class="para"><code class="code">@filecomponents</code>: Determines the display of the filename:</p><ul class="itemizedlist"><li><p class="para">When lt 0, no filename is displayed</p></li><li><p class="para">When eq 0, the full filename (with full path) is displayed</p></li><li><p class="para">When gt 0, this number of filename components is displayed. So 1 means filename only, 2 means filename and direct foldername, etc.</p></li></ul></li><li><p class="para"><code class="code">@header-level</code>: Determines what kind of DocBook section is created:</p><ul class="itemizedlist"><li><p class="para">When le 0, no seperate section is created, all titles will be output as <code class="code">bridgehead</code> elements.</p></li><li><p class="para">Otherwise a title with this level is created (e.g. <code class="code">header-level="1"</code> means a <code class="code">sect1</code> element).</p></li></ul></li></ul><p class="para">When the format to document has means to add documentation of itself (like XProc (<code class="code">p:documentation</code>) or XML Schema (<code class="code">xs:annotation</code>)), this is used. When there is no such thing (like for XSLT and straight XML), comments starting with a tilde (<code class="code">~</code>) are used.</p><p class="para">The descriptions can contain simple Markdown.</p><p class="para">The following formats are supported</p><ul class="itemizedlist"><li><p class="para">XML documents: only the header comment is used.</p></li><li><p class="para">XSLT (2.0 and 3.0) stylesheets: document all exported parameters, variables, functions and named templates. SOmething is supposed to be for export if its <span class="emphasis italic">not</span> in the no or local namespace.</p></li><li><p class="para">XProc (1.0) pipelines and libraries</p></li><li><p class="para">XML Schemas: use the main annotation and document the global elements</p></li></ul><div class="table"><table class="table"><thead><tr><th><p class="para">Port</p></th><th><p class="para">Tp.</p></th><th><p class="para">Pr?</p></th><th><p class="para">Description</p></th></tr></thead><tbody><tr><td><p class="para"><code class="code">source</code></p></td><td><p class="para">in</p></td><td><p class="para"><span class="emphasis bold">*</span></p></td><td><p class="para">The document to generate documentation for, wrapped in an <code class="code">xdoc:transform</code> element.</p></td></tr><tr><td><p class="para"><code class="code">result</code></p></td><td><p class="para">out</p></td><td><p class="para"><span class="emphasis bold">*</span></p></td><td><p class="para">The resulting DocBook output.</p></td></tr></tbody></table></div></div><div class="sect2" id="d404e1259"><a name="d404e1259"/><h3 class="sect2"><span class="sect2-number">2.2.2</span> XProc 1.0 pipeline: <code class="code">xml-description.xpl</code></h3><p class="para">Turns an XML element description into the appropriate DocBook. An annotated schema for the element's description markup can be found in <code class="code">xsd/element-description.xml</code>.</p><p class="para">Typical usage (within an <code class="code">xdoc</code> source document):</p><div class="programlisting"><pre class="programlisting">&lt;xdoc:transform href="$xdoc/xml-description.xpl&gt;
  &lt;xi:include href="path/to/xml/description.xml"/&gt;
&lt;/xdoc:transform&gt;</pre></div><div class="table"><table class="table"><thead><tr><th><p class="para">Port</p></th><th><p class="para">Tp.</p></th><th><p class="para">Pr?</p></th><th><p class="para">Description</p></th></tr></thead><tbody><tr><td><p class="para"><code class="code">source</code></p></td><td><p class="para">in</p></td><td><p class="para"><span class="emphasis bold">*</span></p></td><td><p class="para">The document containing the XML description, wrapped in an <code class="code">xdoc:transform</code> element.</p></td></tr><tr><td><p class="para"><code class="code">result</code></p></td><td><p class="para">out</p></td><td><p class="para"><span class="emphasis bold">*</span></p></td><td><p class="para">The resulting DocBook output, containing the element's description.</p></td></tr></tbody></table></div></div></div><div class="sect1" id="sect-write-your-own-transformations"><a name="sect-write-your-own-transformations"/><h2 class="sect1"><span class="sect1-number">2.3</span> Writing your own <code class="code">xdoc</code> transformations</h2><p class="para"><span class="tbd-marker">[TBD]</span></p></div></div><!-- == TOC == --><div class="toc"><h1 class="toc-header">xtpxlib-xdoc - An xtpxlib component for generating documentation</h1><ul class="toc-level-0"><li><a href="index.html">home</a></li><li><a href="1_Description.html">1 Description</a><ul class="toc-level-1"><li><a href="1_Description.html#d404e370">1.1 Overview</a></li><li><a href="1_Description.html#sect-main-toolchain">1.2 The xtpxlib-xdoc main toolchain</a></li><li><a href="1_Description.html#d404e868">1.3 Documentation website generation</a></li></ul></li><li><a href="2_xdoc_extensions.html">2 xdoc extensions</a><ul class="toc-level-1"><li><a href="2_xdoc_extensions.html#sect-available-xdoc-extension-elements">2.1 xdoc extension elements</a><ul class="toc-level-2"><li><a href="2_xdoc_extensions.html#d404e935">2.1.1 Extension element &lt;xdoc:dump-parameters&gt;</a></li><li><a href="2_xdoc_extensions.html#d404e1016">2.1.2 Extension element &lt;xdoc:transform&gt;</a></li></ul></li><li><a href="2_xdoc_extensions.html#sect-builtin-xdoc-transformations">2.2 Built-in xdoc transformations</a><ul class="toc-level-2"><li><a href="2_xdoc_extensions.html#d404e1124">2.2.1 XProc 1.0 pipeline: code-docgen.xpl</a></li><li><a href="2_xdoc_extensions.html#d404e1259">2.2.2 XProc 1.0 pipeline: xml-description.xpl</a></li></ul></li><li><a href="2_xdoc_extensions.html#sect-write-your-own-transformations">2.3 Writing your own xdoc transformations</a></li></ul></li><li><a href="3_DocBook_dialect.html">3 DocBook dialect</a><ul class="toc-level-1"><li><a href="3_DocBook_dialect.html#d404e1361">3.1 Supported root elements</a></li><li><a href="3_DocBook_dialect.html#sect-docbook5">3.2 Document information</a></li><li><a href="3_DocBook_dialect.html#d404e1404">3.3 Chapter/Section structure</a></li><li><a href="3_DocBook_dialect.html#d404e1448">3.4 Block constructions</a></li><li><a href="3_DocBook_dialect.html#d404e1972">3.5 Inline elements</a></li><li><a href="3_DocBook_dialect.html#d404e2576">3.6 Other constructs</a></li><li><a href="3_DocBook_dialect.html#sect-fixed-width-column-mechanism">3.7 Fixed-width column mechanism</a></li></ul></li><li><a href="resources//xtpxlib-xdoc-documentation.pdf">PDF</a></li></ul></div></body>
</html>